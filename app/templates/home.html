<button ng-click="grantPermission()" ng-if="!notifyAllowed">Grant notify permission!</button>

<p>Last Trade: {{model.lastTrade.total}} BTC 
	@ {{model.lastTrade.price.toString().replace('.','')-0}} SAT <timeless time="model.lastTrade.timeArrived"></timeless> </p>
<p>$Δ {{(model.last5.priceDelta*100).toFixed(2)}}% in 5min</p>
<table ng-if="model" class="trades">
	<thead>
		<th>Range</th>
		<th>Sells</th>
		<th>Buys</th>
	</thead>
	<tbody>
		<tr>
			<td>1min</td>
			<td>{{model.last1.Buy.volume.toFixed(8)}} BTC<!-- | {{(model.last1.Buy.delta*100).toFixed(2)}}%--></td>
			<td>{{model.last1.Sell.volume.toFixed(8)}} BTC<!-- | {{(model.last1.Sell.delta*100).toFixed(2)}}%--></td>
		</tr>
		<tr>
			<td>5min</td>
			<td>{{model.last5.Buy.volume.toFixed(8)}} BTC<!-- | {{(model.last5.Buy.delta*100).toFixed(2)}}%--></td>
			<td>{{model.last5.Sell.volume.toFixed(8)}} BTC<!-- | {{(model.last5.Sell.delta*100).toFixed(2)}}%--></td>
		</tr>
		<tr>
			<td>10min</td>
			<td>{{model.last10.Buy.volume.toFixed(8)}} BTC<!-- | {{(model.last10.Buy.delta*100).toFixed(2)}}%--></td>
			<td>{{model.last10.Sell.volume.toFixed(8)}} BTC<!-- | {{(model.last10.Sell.delta*100).toFixed(2)}}%--></td>
		</tr>
	</tbody>
</table>
<div ng-if="orderState" class="orders">
	<p style="clear:both">
		<button ng-click="tab='last1'" ng-disabled="tab == 'last1'">1min</button>
		<button ng-click="tab='last5'" ng-disabled="tab == 'last5'">5min</button>
		<button ng-click="tab='last10'" ng-disabled="tab == 'last10'">10min</button>
	</p>
	<div style="float:left;">
		SELL
		<table>
			<thead>
				<th>Price</th>
				<th>Amount</th>
				<th>Δ</th>
				<th>Σ</th>
			</thead>
			<tbody>
				<tr ng-repeat="item in orderState.orderbook[tab] | orderStuff: 'asc': orderState.curSell track by item.price">
					<td>{{item.price}}</td>
					<td>{{item.value.toFixed(4)}}</td>
					<td ng-class="{pos: item.delta>0, neg: item.delta<0}">{{item.delta.toFixed(3)}}</td>
					<td ng-class="{pos: item.cumulative>0, neg: item.cumulative<0}">{{item.cumulative.toFixed(3)}}</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div style="float:left;">
		BUY
		<table>
			<thead>
				<th>Price</th>
				<th>Amount</th>
				<th>Δ</th>
				<th>Σ</th>
			</thead>
			<tbody>
				<tr ng-repeat="item in orderState.orderbook[tab] | orderStuff: 'desc': orderState.curBuy track by item.price">
					<td>{{item.price}}</td>
					<td>{{item.value.toFixed(4)}}</td>
					<td ng-class="{pos: item.delta>0, neg: item.delta<0}">{{item.delta.toFixed(3)}}</td>
					<td ng-class="{pos: item.cumulative>0, neg: item.cumulative<0}">{{item.cumulative.toFixed(3)}}</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>